<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Times New Roman', serif; padding: 40px; color: #000; }
        .header { text-align: center; border-bottom: 3px double #000; padding-bottom: 20px; margin-bottom: 30px; }
        .company-name { font-size: 28px; font-weight: bold; letter-spacing: 2px; margin-bottom: 5px; }
        .company-details { font-size: 12px; margin-top: 10px; }
        .invoice-title { font-size: 32px; font-weight: bold; margin: 20px 0; letter-spacing: 3px; }
        .invoice-meta { text-align: right; font-size: 14px; margin-bottom: 30px; }
        .section { margin: 20px 0; }
        .section-title { font-size: 14px; font-weight: bold; border-bottom: 2px solid #000; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; }
        .two-column { display: table; width: 100%; margin: 20px 0; }
        .column { display: table-cell; width: 50%; vertical-align: top; padding: 10px; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        table th { background: #000; color: #fff; padding: 12px; text-align: left; font-weight: bold; }
        table td { padding: 10px; border-bottom: 1px solid #ddd; }
        .totals-table { width: 300px; margin-left: auto; margin-top: 20px; }
        .totals-table td { border: none; padding: 8px; }
        .grand-total { background: #000; color: #fff; font-weight: bold; font-size: 18px; }
        .footer { margin-top: 50px; padding-top: 20px; border-top: 1px solid #000; font-size: 11px; text-align: center; }
        .signature-line { border-top: 1px solid #000; width: 200px; margin: 50px auto 10px; text-align: center; padding-top: 5px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="company-name">{{ company.name }}</div>
        <div class="company-details">{{ company.address }} | Ph: {{ company.phone }} | Email: {{ company.email }}<br>GSTIN: {{ company.gst_number }}</div>
    </div>
    
    <div class="invoice-title" style="text-align: center;">TAX INVOICE</div>
    
    <div class="invoice-meta">
        <strong>Invoice No:</strong> {{ invoice_number }}<br>
        <strong>Date:</strong> {{ date }}<br>
        <strong>Time:</strong> {{ time }}
    </div>
    
    <div class="two-column">
        <div class="column">
            <div class="section-title">Bill To</div>
            <p><strong>{{ customer.name }}</strong></p>
            <p>{{ customer.phone }}</p>
            {% if customer.email %}<p>{{ customer.email }}</p>{% endif %}
            {% if customer.address %}<p>{{ customer.address }}</p>{% endif %}
            {% if customer.gst_number %}<p>GSTIN: {{ customer.gst_number }}</p>{% endif %}
        </div>
        <div class="column">
            <div class="section-title">Payment Information</div>
            <p><strong>Status:</strong> {{ payment_status }}</p>
            {% if payment_method %}<p><strong>Method:</strong> {{ payment_method }}</p>{% endif %}
            <p><strong>Terms:</strong> Net 30 Days</p>
        </div>
    </div>
    
    <table>
        <thead>
            <tr>
                <th style="width: 5%;">#</th>
                <th style="width: 40%;">Description</th>
                <th style="width: 10%; text-align: right;">Qty</th>
                <th style="width: 15%; text-align: right;">Unit Price</th>
                <th style="width: 10%; text-align: right;">GST %</th>
                <th style="width: 20%; text-align: right;">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ loop.index }}</td>
                <td><strong>{{ item.name }}</strong>{% if item.description %}<br><small>{{ item.description }}</small>{% endif %}</td>
                <td style="text-align: right;">{{ item.quantity }}</td>
                <td style="text-align: right;">₹{{ "%.2f"|format(item.unit_price) }}</td>
                <td style="text-align: right;">{{ item.gst_rate }}%</td>
                <td style="text-align: right;">₹{{ "%.2f"|format(item.total_amount) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <table class="totals-table">
        <tr><td>Subtotal:</td><td style="text-align: right;">₹{{ "%.2f"|format(totals.subtotal) }}</td></tr>
        <tr><td>CGST:</td><td style="text-align: right;">₹{{ "%.2f"|format(totals.total_cgst) }}</td></tr>
        <tr><td>SGST:</td><td style="text-align: right;">₹{{ "%.2f"|format(totals.total_sgst) }}</td></tr>
        <tr class="grand-total"><td>GRAND TOTAL:</td><td style="text-align: right;">₹{{ "%.2f"|format(totals.grand_total) }}</td></tr>
    </table>
    
    {% if notes %}
    <div class="section">
        <div class="section-title">Notes</div>
        <p>{{ notes }}</p>
    </div>
    {% endif %}
    
    <div class="signature-line">
        <p>Authorized Signature</p>
    </div>
    
    <div class="footer">
        <p>Thank you for your business!</p>
        <p>This is a computer-generated invoice and does not require a physical signature.</p>
    </div>
</body>
</html>